/*! This File was created by Nikolaus HÃ¶fer - 2016-04-17 - It falls under the Wurzel Licence. */

function getSiteInfo(){$.ajax({type:"GET",url:rootURL+"/siteinfo/"+getLanguage(),dataType:"json",success:function(a){console.log("getSiteInfo success: "+a.siteinfo.site_title),siteinfo=a.siteinfo,renderSiteInfo(siteinfo)}})}function renderSiteInfo(a){$("title").text(a.site_title),$("#head").html($("<a>").text(a.site_title))}function getLanguage(){var a=$.cookie("LANGUAGE");return console.log("getLanguage: "+a),a}function getLanguages(){console.log("getLanguages"),$.ajax({type:"GET",url:rootURL+"/siteinfo",dataType:"json",success:function(a){languages=a.siteinfo.languages,renderLanguages(".languages")}})}function renderLanguages(a){$(a).html(""),languages.length>1&&$.each(languages,function(b,c){var d=c===getLanguage()?"active":"";$(a).append($("<li>").append($("<a>").addClass("contentitem lang "+d).attr("id",c).text(c).on("click",function(){console.log(c),$.cookie("LANGUAGE",c),onLoad(),getEntry(currentID)})))})}function menulink(){console.log("menulink"),currentID=$(this).data("id"),getEntry(currentID),$("#menu #menu_list li a").removeClass("active_link"),$(this).addClass("active_link")}function getAllSiteNames(){console.log("getAllSiteNames"),$.ajax({type:"GET",url:rootURL+"/meta/"+getLanguage(),dataType:"json",success:function(a){console.log("getAllSiteNames success: ",a),renderList(a),sitelist=a},error:function(a){console.log("getallsitenames error: ",a)}})}function renderList(a){console.log("renderList: ",a);var b=null===a.entries?[]:a.entries instanceof Array?a.entries:[a.entries];$("#menu #menu_list li").remove(),$.each(b,function(a,b){for(levels="",i=0;i<b.levels;i++)levels+="<span>+ </span>";active="",$("#menu #menu_list").append("<li>"+levels+'<a href="#'+b.title+'" id="link_'+b.id+'" data-id="'+b.id+'" class="menulink '+active+'">'+b.title+"</a></li>")}),$("#menu #menu_list li a.menulink").unbind().click(menulink),hash.length>0&&$('a[href="#'+hash+'"]').click().addClass("active_link")}function getEntry(a){$.ajax({type:"GET",url:rootURL+"/entries/"+getLanguage()+"/"+a,dataType:"json",success:function(b,c){null!==b.entry?(console.log("getEntry: ",a),currentEntry=b,renderEntry(currentEntry),window.location.hash="#"+b.entry.title):99>a?(console.log("getEntry: ",a+1),getEntry(a+1)):console.log("getEntry error: "+c)},error:function(a,b,c){99>c?getEntry(c+1):alert("getEntry error: "+b)}})}function renderEntry(a){var b=a.entry;console.log("renderEntry: "+b.id),b&&"string"!==b.id&&($("#main_content").attr("class","id"+b.id),$("#main_content").html("").html('<br><h1 id="'+b.id+'" class="contentitem">'+b.title+"</h1><br>"+b.content))}init=function(){hash.length<1&&getEntry(0)},onLoad=function(){console.log("onLoad"),getSiteInfo(),getAllSiteNames(),getLanguages()};var hash=decodeURIComponent(location.hash.split("#").pop()),rootURL="api/index.php",langSelected=getLanguage(),siteinfo,sitelist,languages,currentEntry,currentID=0,newPos=null,newLevel=0;$(function(){init()}),$(document).ready(function(){$(".lang-link.selected").removeClass("selected"),$('.lang-link[data-lang="'+$.cookie("LANGUAGE")+'"]').addClass("selected"),$(".lang-link").click(function(a){a.preventDefault();var b=$(this).data("lang");$.removeCookie("LANGUAGE"),$.cookie("LANGUAGE",b),location.reload()})});
//# sourceMappingURL=master.min.js.map